<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Tra cứu điểm kiểm tra môn chuyên - Lớp A3K54</title>
    <script src="data.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #app { max-width: 600px; margin: auto; }
        input { width: 100%; padding: 10px; margin-bottom: 10px; }
        button { padding: 10px; width: 100%; }
        #result { margin-top: 20px; border: 1px solid #ccc; padding: 10px; }
    </style>
</head>
<body>
    <div id="app">
        <h1>Tra cứu điểm kiểm tra môn chuyên - Lớp A3K54</h1>
        <input id="nameInput" type="text" placeholder="Nhập họ và tên học sinh (ví dụ: Đậu Bình An)">
        <button onclick="searchStudent()">Tra cứu</button>
        <div id="result"></div>
    </div>

    <script>
        function searchStudent() {
            var name = document.getElementById("nameInput").value.trim();
            var student = students.find(s => s.name === name);
            if (!student) {
                document.getElementById("result").innerHTML = "<p>Không tìm thấy học sinh. Vui lòng kiểm tra tên chính xác (có dấu).</p>";
                return;
            }
            var scores = student.scores;
            var totalScore = scores[0] + scores[1] + scores[2];

            // Tính thứ hạng dựa trên điểm tổng (xếp hạng giảm dần)
            var sortedStudents = students.slice().sort((a, b) => {
                var totalA = a.scores[0] + a.scores[1] + a.scores[2];
                var totalB = b.scores[0] + b.scores[1] + b.scores[2];
                return totalB - totalA;
            });
            var rank = sortedStudents.findIndex(s => s.name === name) + 1;

            var html = `
                <p><strong>Học sinh:</strong> ${name}</p>
                <p><strong>KT 1 (8/8/2025):</strong> ${scores[0]}</p>
                <p><strong>KT 2 (22/8/2025):</strong> ${scores[1]}</p>
                <p><strong>KT 3 (17/9/2025):</strong> ${scores[2]}</p>
                <p><strong>Điểm tổng:</strong> ${totalScore.toFixed(2)}</p>
                <p><strong>Hạng điểm tổng:</strong> ${rank}/35</p>
            `;
            document.getElementById("result").innerHTML = html;
        }
    </script>
</body>
</html>
